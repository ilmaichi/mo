import{g as c}from"./index.CB87Sc6I.js";import{D as J}from"./DrawSVGPlugin.hRHa1nOD.js";import{M as K}from"./MorphSVGPlugin.qjPP4kxr.js";import{S as Q}from"./ScrambleTextPlugin.DkkuzaFX.js";import{S as w}from"./ScrollTrigger.Cv03IO65.js";import{S as _}from"./ScrollToPlugin.Q-hkYCME.js";const l={active:!1,x:typeof window<"u"?window.innerWidth/2:0,y:typeof window<"u"?window.innerHeight/2:0};let b=null,O=null;function $(){window.addEventListener("deviceorientation",e=>{if(e.beta===null||e.gamma===null)return;if(b===null){b=e.beta,O=e.gamma,l.active=!0;return}const i=e.gamma-O,t=e.beta-b;l.x=window.innerWidth/2+i*15,l.y=window.innerHeight/2+t*15},!0)}function X(e){const i=document.getElementById("gyro-cta");if(!i)return;const t=i.querySelector("span");e==="active"?(t&&(t.innerText="MUOVI PER INTERAGIRE"),setTimeout(()=>{i.style.opacity="0",setTimeout(()=>i.classList.add("hidden"),500)},3e3)):e==="ask"&&(t&&(t.innerText="ATTIVA INTERAZIONE"),i.classList.remove("hidden"))}function ee(){window.matchMedia("(pointer: fine)").matches||window.DeviceOrientationEvent&&(typeof DeviceOrientationEvent.requestPermission=="function"?(X("ask"),document.getElementById("gyro-cta")?.addEventListener("click",()=>{DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&($(),X("active"))}).catch(console.error)})):($(),X("active")))}const q=typeof window<"u"?window.matchMedia("(pointer: fine)").matches:!1;let d=window.innerWidth/2,u=window.innerHeight/2,g=d,y=u,v=0,M=window.innerWidth/2,E=window.innerHeight/2,Y=window.innerWidth/2,P=window.innerHeight/2,j=window.innerWidth/2,N=window.innerHeight/2,k=.4,a=!1,V,B,x=d,L=u,T=document.getElementById("nav-text-menu");const r=document.getElementById("custom-cursor");let I,S;const z=e=>e?{eye:e.querySelector(".intero-occhio"),pup:e.querySelector(".p-mover"),brow:e.querySelector(".sopracciglio")}:null;let A,W,C,D,p;function te(){H=document.getElementById("cursor-container");const e=document.getElementById("hero-logo-wrapper"),i=document.getElementById("nav-logo-wrapper");if(I=z(e),S=z(i),r&&q&&(A=c.quickSetter(r,"x","px"),W=c.quickSetter(r,"y","px"),C=c.quickTo(r,"scaleX",{duration:.2,ease:"power2.out"}),D=c.quickTo(r,"scaleY",{duration:.2,ease:"power2.out"}),p=c.quickTo(r,"rotation",{duration:.2,ease:"power2.out"})),r&&q){document.addEventListener("mouseover",o=>{const n=o.target;if(!n)return;const m=window.getComputedStyle(n).cursor==="pointer",f=n.closest("a")||n.closest("button"),s=n.closest(".menu-link")||n.closest("#nav-text-menu");(m||f)&&!s&&r.classList.add("is-hovering"),n.closest(".big-works-link")&&r.classList.add("is-works-link"),(n.closest(".scrivimi-link")||n.closest(".email-link"))&&r.classList.add("is-email")}),document.addEventListener("mouseout",o=>{r.classList.remove("is-hovering","is-works-link","is-email")});const t=document.querySelectorAll(".type-youtube, .module video[controls]");console.log("Moduli YouTube trovati:",t.length),t.forEach((o,n)=>{o.addEventListener("mouseenter",()=>{r&&(r.style.display="none")}),o.addEventListener("mouseleave",()=>{console.log(`MOUSE LEAVE dal modulo ${n}`),r&&(r.style.display="block")})})}document.addEventListener("mousemove",t=>{if(!l.active){if(d=t.clientX,u=t.clientY,window.realMX=t.clientX,window.realMY=t.clientY,x=t.clientX,L=t.clientY,T){const o=T.getBoundingClientRect();Math.hypot(d-(o.left+o.width/2),u-(o.top+o.height/2))<60&&!document.body.classList.contains("use-standard-cursor")?(a=!0,T.classList.add("sticky-active"),d=o.left+o.width/2,u=o.top+o.height/2):(a=!1,T.classList.remove("sticky-active"))}else a=!1;ie()}}),F()}function U(e,i,t,o){const n=e.getBoundingClientRect(),m=n.left+n.width/2,f=n.top+n.height/2,s=t-m,h=o-f,Z=Math.hypot(s,h),R=Math.atan2(h,s),G=Math.min(Z*.1,i);return{x:Math.cos(R)*G,y:Math.sin(R)*G}}function ne(){clearInterval(B),B=setInterval(()=>{l.active?(d=Math.random()*window.innerWidth,u=Math.random()*window.innerHeight):(window.realMX=void 0,window.realMY=void 0,d=x=Math.random()*window.innerWidth,u=L=Math.random()*window.innerHeight)},2500)}function ie(){clearInterval(B),clearTimeout(V),V=setTimeout(ne,2e3)}let H;function oe(e,i){if(!H)return;const t=document.createElement("div");t.className="drop",t.style.left=`${e}px`,t.style.top=`${i}px`,H.appendChild(t),t.animate([{transform:"translate(-50%, -50%) scale(1)",opacity:.6},{transform:"translate(-50%, -50%) scale(0)",opacity:0}],{duration:600,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}).onfinish=()=>t.remove()}function F(){let e,i,t,o;if(l.active?(x=l.x,L=l.y,e=t=x,i=o=L):window.realMX!==void 0?(e=t=window.realMX,i=o=window.realMY,j=window.realMX,N=window.realMY):(e=d,i=u,t=j,o=N),M+=(e-M)*k,E+=(i-E)*k,Y+=(t-Y)*k,P+=(o-P)*k,q&&A&&W){const n=Y-g,m=P-y,f=Math.hypot(n,m);if(g+=n*(a?.3:.2),y+=m*(a?.3:.2),A(g),W(y),f<5||a){p.tween.duration(1.2),v+=.05;const s=a?1:.33;C(s+Math.sin(v)*(a?.05:.02)),D(s+Math.cos(v*.8)*(a?.06:.03)),p(a?0:Math.sin(v*.5)*5)}else{p.tween.duration(.05);const s=Math.atan2(m,n)*(180/Math.PI),h=Math.min(f/500,.6);C(.33+h*.3),D(.33-h*.2),p(s),f>20&&Math.random()>.8&&!a&&oe(g,y)}}if(I){const n=U(I.eye,50,M,E);I.pup.style.transform=`translate(${n.x}px, ${n.y}px)`}if(S){const n=U(S.eye,30,M,E);S.pup.style.transform=`translate(${n.x}px, ${n.y}px)`}requestAnimationFrame(F)}c.registerPlugin(K,w,_,J,Q);document.querySelectorAll(".internal-link").forEach(e=>{e.addEventListener("click",i=>{targetInterno=e.getAttribute("href"),targetInterno&&targetInterno.startsWith("#")&&(i.preventDefault(),c.to(window,{duration:1.5,scrollTo:targetInterno,ease:"power2.inOut",delay:.2}))})});function re(){w.getAll().forEach(e=>{e.vars.pin===".project-side"&&e.kill()}),w.matchMedia({"(min-width: 901px)":function(){w.create({trigger:".project-grid",start:"top 140px",end:"bottom bottom",pin:".project-side",pinSpacing:!1,invalidateOnRefresh:!0,anticipatePin:1,refreshPriority:1})}})}function ae(){document.querySelector(".project-side")&&re(),document.getElementById("works-ink-path")&&initWorksInkReveal(),ee(),te(),w.refresh(),c.to("#custom-cursor",{opacity:1,duration:.5});const e=document.getElementById("gyro-cta");e&&c.to(e,{opacity:1,duration:.5,delay:.2})}window.addEventListener("resize",se(()=>{w.refresh()},200));function se(e,i){let t;return function(...o){clearTimeout(t),t=setTimeout(()=>e.apply(this,o),i)}}window.addEventListener("load",ae);
